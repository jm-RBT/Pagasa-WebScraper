================================================================================
                    PDF ANNOTATION GUI - ARCHITECTURE
================================================================================

                         MAIN APPLICATION
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ PDFAnnotationAppâ”‚
                         â”‚  (Controller)   â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    PDFViewer        â”‚     â”‚    JSONEditor     â”‚
         â”‚   (Left Panel)      â”‚     â”‚   (Right Panel)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   pypdfium2 PDF     â”‚     â”‚  ScrolledText     â”‚
         â”‚     Rendering       â”‚     â”‚   JSON Editing    â”‚
         â”‚   - Page navigation â”‚     â”‚  - Validation     â”‚
         â”‚   - Zoom support    â”‚     â”‚  - Syntax check   â”‚
         â”‚   - Scrolling       â”‚     â”‚  - Error display  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATA FLOW
================================================================================

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   dataset/  â”‚
  â”‚    pdfs/    â”‚â—„â”€â”€â”€â”€â”€â”€â”€ 1. Scan for PDFs
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 2. Load PDF
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  PDFViewer renders  â”‚
  â”‚  first page         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 3. Trigger extraction
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ TyphoonBulletinExtractorâ”‚
  â”‚  (Background Thread)    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 4. Return JSON data
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  JSONEditor displaysâ”‚
  â”‚  extracted data     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 5. User edits
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Validate JSON      â”‚
  â”‚  on Save button     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 6. Save annotation
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   dataset/          â”‚
  â”‚ pdfs_annotation/    â”‚
  â”‚  â””â”€ filename.json   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER INTERFACE LAYOUT
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“„ PAGASA PDF Annotation Tool          File 1 of 10: file.pdf   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                    â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  {                          â”‚
â”‚  â”‚                          â”‚     â”‚    "updated_datetime": "...",â”‚
â”‚  â”‚                          â”‚     â”‚    "typhoon_location": "...",â”‚
â”‚  â”‚      PDF PREVIEW         â”‚     â”‚    "typhoon_windspeed": "...",â”‚
â”‚  â”‚    (144 DPI Render)      â”‚     â”‚    "typhoon_movement": "...",â”‚
â”‚  â”‚                          â”‚     â”‚    "signal_warning_tags1": {â”‚
â”‚  â”‚                          â”‚     â”‚      "Luzon": "...",         â”‚
â”‚  â”‚                          â”‚     â”‚      "Visayas": "...",       â”‚
â”‚  â”‚                          â”‚     â”‚      "Mindanao": "...",      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚      "Other": "..."          â”‚
â”‚                                    â”‚    },                        â”‚
â”‚  [â—€ Prev Page] [Next Page â–¶]      â”‚    ...                       â”‚
â”‚  Page 1 of 5                       â”‚  }                          â”‚
â”‚                                    â”‚                             â”‚
â”‚                                    â”‚  âœ“ Valid JSON               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [Previous]  [Save & Next]  [Next]                    [Quit]     â”‚
â”‚                                                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                     â”‚
â”‚  â– â– â– â– â– â– â– â– â– â–  Processing... Please wait                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLASS STRUCTURE
================================================================================

class PDFViewer(tk.Frame):
    Methods:
    - __init__()
    - load_pdf(pdf_path)
    - render_page()
    - next_page()
    - prev_page()
    - close()
    
class JSONEditor(tk.Frame):
    Methods:
    - __init__()
    - set_json(data)
    - get_json()
    - validate()
    - clear()
    
class PDFAnnotationApp:
    Methods:
    - __init__(root)
    - setup_ui()
    - init_extractor()
    - load_pdf_list()
    - load_pdf(index)
    - analyze_pdf_async(pdf_path)
    - handle_extraction_result(pdf_path, data)
    - save_annotation()
    - next_pdf()
    - prev_pdf()
    - save_and_next()
    - update_ui_state()
    - show_processing()
    - hide_processing()
    - quit_app()

TECHNOLOGY STACK
================================================================================

Layer               Technology          Purpose
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
GUI Framework       tkinter             Cross-platform GUI
PDF Rendering       pypdfium2           Fast PDF rendering
Image Processing    PIL/Pillow          Image display in tkinter
Data Extraction     TyphoonBulletin-    ML-based extraction
                    Extractor           
JSON Handling       json (stdlib)       Parse/validate JSON
Threading           threading (stdlib)  Background processing
File Operations     pathlib (stdlib)    Path manipulation

DEPENDENCIES (No additional packages needed beyond requirements.txt)
================================================================================
âœ“ tkinter          (standard library)
âœ“ pypdfium2        (already in requirements.txt)
âœ“ Pillow           (already in requirements.txt)
âœ“ pdfplumber       (already in requirements.txt, for extraction)
âœ“ pandas           (already in requirements.txt, for extraction)
âœ“ torch            (already in requirements.txt, for extraction)
âœ“ transformers     (already in requirements.txt, for extraction)

ERROR HANDLING
================================================================================

Scenario                        Handling
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
No PDFs found                   Warning message, empty state
PDF rendering fails             Error message, skip to next
Extraction fails                Error message, allow manual JSON entry
Invalid JSON on save            Validation error, prevent save
Thread exception                Graceful degradation, error display
File permission error           Clear error message
User cancels quit               Return to application

TESTING CHECKLIST
================================================================================
â˜ Launch application
â˜ Test with no PDFs in directory
â˜ Test with single PDF
â˜ Test with multiple PDFs
â˜ Test PDF page navigation
â˜ Test automatic extraction
â˜ Test JSON editing
â˜ Test invalid JSON handling
â˜ Test save functionality
â˜ Test navigation (Previous/Next)
â˜ Test Save & Next workflow
â˜ Test existing annotation loading
â˜ Test quit confirmation
â˜ Test with large PDFs (>100 pages)
â˜ Test with corrupted PDFs

================================================================================
